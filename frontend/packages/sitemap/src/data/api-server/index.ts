import type { ApiEndpoint } from '../../types';

/**
 * API Server endpoints (Port 8080)
 * Source: backend/servers/api-server/src/routes/
 */
export const apiServerEndpoints: ApiEndpoint[] = [
  // Health
  {
    operationId: 'health_check',
    server: 'api-server',
    method: 'GET',
    path: '/health',
    description: 'Health check endpoint',
    tags: ['Health'],
    responses: [{ statusCode: 200, description: 'Healthy' }],
    auth: { required: false },
  },

  // Authentication
  {
    operationId: 'auth_login',
    server: 'api-server',
    method: 'POST',
    path: '/api/v1/auth/login',
    description: 'Login with email and password',
    tags: ['Authentication'],
    requestBody: {
      ref: 'Auth.LoginRequest',
      contentType: 'application/json',
      required: true,
    },
    responses: [
      { statusCode: 200, description: 'Successful login', ref: 'Auth.LoginResponse' },
      { statusCode: 401, description: 'Invalid credentials' },
    ],
    auth: { required: false },
    feature: 'UC-14',
  },
  {
    operationId: 'auth_register',
    server: 'api-server',
    method: 'POST',
    path: '/api/v1/auth/register',
    description: 'Register new user account',
    tags: ['Authentication'],
    requestBody: {
      ref: 'Auth.RegisterRequest',
      contentType: 'application/json',
      required: true,
    },
    responses: [
      { statusCode: 201, description: 'User created' },
      { statusCode: 400, description: 'Invalid input' },
      { statusCode: 409, description: 'Email already exists' },
    ],
    auth: { required: false },
    feature: 'UC-14',
  },
  {
    operationId: 'auth_logout',
    server: 'api-server',
    method: 'POST',
    path: '/api/v1/auth/logout',
    description: 'Logout user',
    tags: ['Authentication'],
    responses: [{ statusCode: 200, description: 'Logged out' }],
    auth: { required: true },
    feature: 'UC-14',
  },
  {
    operationId: 'auth_refresh',
    server: 'api-server',
    method: 'POST',
    path: '/api/v1/auth/refresh',
    description: 'Refresh access token',
    tags: ['Authentication'],
    responses: [
      { statusCode: 200, description: 'Token refreshed' },
      { statusCode: 401, description: 'Invalid refresh token' },
    ],
    auth: { required: false },
    feature: 'UC-14',
  },

  // Documents
  {
    operationId: 'documents_list',
    server: 'api-server',
    method: 'GET',
    path: '/api/v1/documents',
    description: 'List documents',
    tags: ['Documents'],
    queryParams: [
      { name: 'page', type: 'number', required: false, defaultValue: 1 },
      { name: 'limit', type: 'number', required: false, defaultValue: 20 },
    ],
    responses: [{ statusCode: 200, description: 'Document list' }],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'Epic-39',
  },
  {
    operationId: 'documents_get',
    server: 'api-server',
    method: 'GET',
    path: '/api/v1/documents/:id',
    description: 'Get document details',
    tags: ['Documents'],
    pathParams: [{ name: 'id', type: 'uuid', required: true }],
    responses: [
      { statusCode: 200, description: 'Document details' },
      { statusCode: 404, description: 'Not found' },
    ],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'Epic-39',
  },
  {
    operationId: 'documents_upload',
    server: 'api-server',
    method: 'POST',
    path: '/api/v1/documents',
    description: 'Upload a new document',
    tags: ['Documents'],
    requestBody: {
      contentType: 'multipart/form-data',
      required: true,
    },
    responses: [
      { statusCode: 201, description: 'Document created' },
      { statusCode: 400, description: 'Invalid file' },
    ],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'Epic-39',
  },
  {
    operationId: 'documents_get_versions',
    server: 'api-server',
    method: 'GET',
    path: '/api/v1/documents/:id/versions',
    description: 'Get document versions',
    tags: ['Documents'],
    pathParams: [{ name: 'id', type: 'uuid', required: true }],
    responses: [{ statusCode: 200, description: 'Version list' }],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'Epic-39',
  },

  // Faults
  {
    operationId: 'faults_list',
    server: 'api-server',
    method: 'GET',
    path: '/api/v1/faults',
    description: 'List faults',
    tags: ['Faults'],
    queryParams: [
      { name: 'page', type: 'number', required: false, defaultValue: 1 },
      { name: 'limit', type: 'number', required: false, defaultValue: 20 },
      { name: 'status', type: 'string', required: false },
    ],
    responses: [{ statusCode: 200, description: 'Fault list' }],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'UC-03',
  },
  {
    operationId: 'faults_get',
    server: 'api-server',
    method: 'GET',
    path: '/api/v1/faults/:id',
    description: 'Get fault details',
    tags: ['Faults'],
    pathParams: [{ name: 'id', type: 'uuid', required: true }],
    responses: [
      { statusCode: 200, description: 'Fault details' },
      { statusCode: 404, description: 'Not found' },
    ],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'UC-03',
  },
  {
    operationId: 'faults_create',
    server: 'api-server',
    method: 'POST',
    path: '/api/v1/faults',
    description: 'Report a new fault',
    tags: ['Faults'],
    requestBody: {
      ref: 'Faults.CreateRequest',
      contentType: 'application/json',
      required: true,
    },
    responses: [
      { statusCode: 201, description: 'Fault created' },
      { statusCode: 400, description: 'Invalid input' },
    ],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'UC-03',
  },

  // Voting
  {
    operationId: 'voting_list',
    server: 'api-server',
    method: 'GET',
    path: '/api/v1/voting',
    description: 'List votes',
    tags: ['Voting'],
    queryParams: [
      { name: 'page', type: 'number', required: false, defaultValue: 1 },
      { name: 'limit', type: 'number', required: false, defaultValue: 20 },
      { name: 'status', type: 'string', required: false },
    ],
    responses: [{ statusCode: 200, description: 'Vote list' }],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'UC-04',
  },
  {
    operationId: 'voting_get',
    server: 'api-server',
    method: 'GET',
    path: '/api/v1/voting/:id',
    description: 'Get vote details',
    tags: ['Voting'],
    pathParams: [{ name: 'id', type: 'uuid', required: true }],
    responses: [
      { statusCode: 200, description: 'Vote details' },
      { statusCode: 404, description: 'Not found' },
    ],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'UC-04',
  },
  {
    operationId: 'voting_cast',
    server: 'api-server',
    method: 'POST',
    path: '/api/v1/voting/:id/cast',
    description: 'Cast a vote',
    tags: ['Voting'],
    pathParams: [{ name: 'id', type: 'uuid', required: true }],
    requestBody: {
      ref: 'Voting.CastRequest',
      contentType: 'application/json',
      required: true,
    },
    responses: [
      { statusCode: 200, description: 'Vote cast' },
      { statusCode: 400, description: 'Invalid vote' },
      { statusCode: 403, description: 'Not eligible' },
    ],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'UC-04',
  },

  // Announcements
  {
    operationId: 'announcements_list',
    server: 'api-server',
    method: 'GET',
    path: '/api/v1/announcements',
    description: 'List announcements',
    tags: ['Announcements'],
    queryParams: [
      { name: 'page', type: 'number', required: false, defaultValue: 1 },
      { name: 'limit', type: 'number', required: false, defaultValue: 20 },
    ],
    responses: [{ statusCode: 200, description: 'Announcement list' }],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'Epic-6',
  },
  {
    operationId: 'announcements_get',
    server: 'api-server',
    method: 'GET',
    path: '/api/v1/announcements/:id',
    description: 'Get announcement details',
    tags: ['Announcements'],
    pathParams: [{ name: 'id', type: 'uuid', required: true }],
    responses: [
      { statusCode: 200, description: 'Announcement details' },
      { statusCode: 404, description: 'Not found' },
    ],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'Epic-6',
  },

  // News
  {
    operationId: 'news_list',
    server: 'api-server',
    method: 'GET',
    path: '/api/v1/news',
    description: 'List news articles',
    tags: ['News'],
    queryParams: [
      { name: 'page', type: 'number', required: false, defaultValue: 1 },
      { name: 'limit', type: 'number', required: false, defaultValue: 20 },
    ],
    responses: [{ statusCode: 200, description: 'News list' }],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'Epic-59',
  },
  {
    operationId: 'news_get',
    server: 'api-server',
    method: 'GET',
    path: '/api/v1/news/:id',
    description: 'Get news article details',
    tags: ['News'],
    pathParams: [{ name: 'id', type: 'uuid', required: true }],
    responses: [
      { statusCode: 200, description: 'News article' },
      { statusCode: 404, description: 'Not found' },
    ],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'Epic-59',
  },

  // Emergency
  {
    operationId: 'emergency_list',
    server: 'api-server',
    method: 'GET',
    path: '/api/v1/emergency',
    description: 'List emergency contacts',
    tags: ['Emergency'],
    responses: [{ statusCode: 200, description: 'Emergency contacts list' }],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'Epic-62',
  },

  // Disputes
  {
    operationId: 'disputes_list',
    server: 'api-server',
    method: 'GET',
    path: '/api/v1/disputes',
    description: 'List disputes',
    tags: ['Disputes'],
    queryParams: [
      { name: 'page', type: 'number', required: false, defaultValue: 1 },
      { name: 'limit', type: 'number', required: false, defaultValue: 20 },
      { name: 'status', type: 'string', required: false },
    ],
    responses: [{ statusCode: 200, description: 'Dispute list' }],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'Epic-77',
  },
  {
    operationId: 'disputes_get',
    server: 'api-server',
    method: 'GET',
    path: '/api/v1/disputes/:id',
    description: 'Get dispute details',
    tags: ['Disputes'],
    pathParams: [{ name: 'id', type: 'uuid', required: true }],
    responses: [
      { statusCode: 200, description: 'Dispute details' },
      { statusCode: 404, description: 'Not found' },
    ],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'Epic-77',
  },
  {
    operationId: 'disputes_create',
    server: 'api-server',
    method: 'POST',
    path: '/api/v1/disputes',
    description: 'File a new dispute',
    tags: ['Disputes'],
    requestBody: {
      ref: 'Disputes.CreateRequest',
      contentType: 'application/json',
      required: true,
    },
    responses: [
      { statusCode: 201, description: 'Dispute created' },
      { statusCode: 400, description: 'Invalid input' },
    ],
    auth: { required: true, tenantContext: { required: true } },
    feature: 'Epic-77',
  },

  // Dashboard
  {
    operationId: 'dashboard_get',
    server: 'api-server',
    method: 'GET',
    path: '/api/v1/dashboard',
    description: 'Get dashboard data',
    tags: ['Dashboard'],
    responses: [{ statusCode: 200, description: 'Dashboard data' }],
    auth: { required: true, tenantContext: { required: true } },
  },
];
