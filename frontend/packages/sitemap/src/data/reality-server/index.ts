import type { ApiEndpoint } from '../../types';

/**
 * Reality Server endpoints (Port 8081)
 * Source: backend/servers/reality-server/src/routes/
 */
export const realityServerEndpoints: ApiEndpoint[] = [
  // Health
  {
    operationId: 'health_check',
    server: 'reality-server',
    method: 'GET',
    path: '/health',
    description: 'Health check endpoint',
    tags: ['Health'],
    responses: [{ statusCode: 200, description: 'Healthy' }],
    auth: { required: false },
  },

  // Listings
  {
    operationId: 'listings_search',
    server: 'reality-server',
    method: 'GET',
    path: '/api/v1/listings',
    description: 'Search property listings',
    tags: ['Listings'],
    queryParams: [
      { name: 'type', type: 'string', required: false, description: 'sale or rent' },
      { name: 'price_min', type: 'number', required: false },
      { name: 'price_max', type: 'number', required: false },
      { name: 'area_min', type: 'number', required: false },
      { name: 'area_max', type: 'number', required: false },
      { name: 'rooms', type: 'number', required: false },
      { name: 'city', type: 'string', required: false },
      { name: 'page', type: 'number', required: false, defaultValue: 1 },
      { name: 'limit', type: 'number', required: false, defaultValue: 20 },
      { name: 'sort', type: 'string', required: false },
    ],
    responses: [{ statusCode: 200, description: 'Listing search results' }],
    auth: { required: false },
    feature: 'Epic-16',
  },
  {
    operationId: 'listings_get',
    server: 'reality-server',
    method: 'GET',
    path: '/api/v1/listings/:slug',
    description: 'Get listing details by slug',
    tags: ['Listings'],
    pathParams: [{ name: 'slug', type: 'string', required: true }],
    responses: [
      { statusCode: 200, description: 'Listing details' },
      { statusCode: 404, description: 'Not found' },
    ],
    auth: { required: false },
    feature: 'Epic-16',
  },
  {
    operationId: 'listings_suggestions',
    server: 'reality-server',
    method: 'GET',
    path: '/api/v1/listings/suggestions',
    description: 'Get search suggestions',
    tags: ['Listings'],
    queryParams: [{ name: 'q', type: 'string', required: true }],
    responses: [{ statusCode: 200, description: 'Search suggestions' }],
    auth: { required: false },
    feature: 'Epic-16',
  },

  // Favorites
  {
    operationId: 'favorites_list',
    server: 'reality-server',
    method: 'GET',
    path: '/api/v1/favorites',
    description: "List user's favorites",
    tags: ['Favorites'],
    responses: [{ statusCode: 200, description: 'Favorites list' }],
    auth: { required: true },
  },
  {
    operationId: 'favorites_add',
    server: 'reality-server',
    method: 'POST',
    path: '/api/v1/favorites',
    description: 'Add to favorites',
    tags: ['Favorites'],
    requestBody: {
      ref: 'Favorites.AddRequest',
      contentType: 'application/json',
      required: true,
    },
    responses: [
      { statusCode: 201, description: 'Added to favorites' },
      { statusCode: 409, description: 'Already favorited' },
    ],
    auth: { required: true },
  },
  {
    operationId: 'favorites_remove',
    server: 'reality-server',
    method: 'DELETE',
    path: '/api/v1/favorites/:id',
    description: 'Remove from favorites',
    tags: ['Favorites'],
    pathParams: [{ name: 'id', type: 'uuid', required: true }],
    responses: [
      { statusCode: 200, description: 'Removed from favorites' },
      { statusCode: 404, description: 'Not found' },
    ],
    auth: { required: true },
  },

  // Saved Searches
  {
    operationId: 'saved_searches_list',
    server: 'reality-server',
    method: 'GET',
    path: '/api/v1/saved-searches',
    description: 'List saved searches',
    tags: ['SavedSearches'],
    responses: [{ statusCode: 200, description: 'Saved searches list' }],
    auth: { required: true },
  },
  {
    operationId: 'saved_searches_create',
    server: 'reality-server',
    method: 'POST',
    path: '/api/v1/saved-searches',
    description: 'Create saved search',
    tags: ['SavedSearches'],
    requestBody: {
      ref: 'SavedSearches.CreateRequest',
      contentType: 'application/json',
      required: true,
    },
    responses: [{ statusCode: 201, description: 'Saved search created' }],
    auth: { required: true },
  },
  {
    operationId: 'saved_searches_delete',
    server: 'reality-server',
    method: 'DELETE',
    path: '/api/v1/saved-searches/:id',
    description: 'Delete saved search',
    tags: ['SavedSearches'],
    pathParams: [{ name: 'id', type: 'uuid', required: true }],
    responses: [{ statusCode: 200, description: 'Deleted' }],
    auth: { required: true },
  },

  // Inquiries
  {
    operationId: 'inquiries_list',
    server: 'reality-server',
    method: 'GET',
    path: '/api/v1/inquiries',
    description: 'List inquiries',
    tags: ['Inquiries'],
    responses: [{ statusCode: 200, description: 'Inquiries list' }],
    auth: { required: true },
  },
  {
    operationId: 'inquiries_contact',
    server: 'reality-server',
    method: 'POST',
    path: '/api/v1/inquiries/contact/:listing_id',
    description: 'Send contact message',
    tags: ['Inquiries'],
    pathParams: [{ name: 'listing_id', type: 'uuid', required: true }],
    requestBody: {
      ref: 'Inquiries.ContactRequest',
      contentType: 'application/json',
      required: true,
    },
    responses: [{ statusCode: 201, description: 'Message sent' }],
    auth: { required: false },
    feature: 'Epic-33',
  },
  {
    operationId: 'inquiries_viewing',
    server: 'reality-server',
    method: 'POST',
    path: '/api/v1/inquiries/viewing/:listing_id',
    description: 'Request viewing',
    tags: ['Inquiries'],
    pathParams: [{ name: 'listing_id', type: 'uuid', required: true }],
    requestBody: {
      ref: 'Inquiries.ViewingRequest',
      contentType: 'application/json',
      required: true,
    },
    responses: [{ statusCode: 201, description: 'Viewing requested' }],
    auth: { required: false },
    feature: 'Epic-33',
  },

  // SSO
  {
    operationId: 'sso_login',
    server: 'reality-server',
    method: 'GET',
    path: '/api/v1/sso/login',
    description: 'Initiate SSO login',
    tags: ['SSO'],
    responses: [{ statusCode: 302, description: 'Redirect to OAuth provider' }],
    auth: { required: false },
    feature: 'Epic-10A',
  },
  {
    operationId: 'sso_callback',
    server: 'reality-server',
    method: 'GET',
    path: '/api/v1/sso/callback',
    description: 'SSO callback',
    tags: ['SSO'],
    responses: [{ statusCode: 302, description: 'Redirect after auth' }],
    auth: { required: false },
    feature: 'Epic-10A',
  },
  {
    operationId: 'sso_session',
    server: 'reality-server',
    method: 'GET',
    path: '/api/v1/sso/session',
    description: 'Get current session',
    tags: ['SSO'],
    responses: [{ statusCode: 200, description: 'Session info' }],
    auth: { required: true },
    feature: 'Epic-10A',
  },

  // Agencies
  {
    operationId: 'agencies_get',
    server: 'reality-server',
    method: 'GET',
    path: '/api/v1/agencies/:id',
    description: 'Get agency details',
    tags: ['Agencies'],
    pathParams: [{ name: 'id', type: 'uuid', required: true }],
    responses: [
      { statusCode: 200, description: 'Agency details' },
      { statusCode: 404, description: 'Not found' },
    ],
    auth: { required: false },
    feature: 'Epic-32',
  },
  {
    operationId: 'agencies_create',
    server: 'reality-server',
    method: 'POST',
    path: '/api/v1/agencies',
    description: 'Create agency',
    tags: ['Agencies'],
    requestBody: {
      ref: 'Agencies.CreateRequest',
      contentType: 'application/json',
      required: true,
    },
    responses: [{ statusCode: 201, description: 'Agency created' }],
    auth: { required: true, roles: ['organization_admin'] },
    feature: 'Epic-32',
  },
];
